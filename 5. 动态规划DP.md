# çŠ¶æ€ä¸çŠ¶æ€è½¬ç§»

### ä¾‹1. æ•°å­—ä¸‰è§’å½¢: ç»™å‡ºä¸€ä¸ªæ•°å­—ä¸‰è§’å½¢, ä»é¡¶ç‚¹å‡ºå‘æ¯æ¬¡å‘ä¸‹æˆ–å‘å³ä¸‹èµ°ä¸€æ­¥, ç›´è‡³æœ€åº•å±‚, å°†é€”ç»çš„æ•°å­—ç›¸åŠ , å¾—åˆ°æœ€å¤§å€¼. å¦‚,
$$
\begin{matrix}
    7 \\
    3 & 8 \\
    8 & 1 & 0 \\
    2 & 7 & 4 & 4 \\
    4 & 5 & 2 & 6 & 5
\end{matrix}
$$
è§£ä¸º $7 \rightarrow 3 \rightarrow 8 \rightarrow 7 \rightarrow 5 = 30$.

> å®šä¹‰çŠ¶æ€ `dp[i][j]` ä¸ºä»ç¬¬ `1` è¡Œç¬¬ `1` åˆ—å‡ºå‘, èµ°åˆ°ç¬¬`i` è¡Œç¬¬ `j` åˆ—æ‰€æœ‰è·¯å¾„çš„æœ€å¤§å’Œ. æœ‰
> 
> `dp[i][j] = max(dp[i - 1][j - 1], dp[i - 1][j]) + matrix[i][j]`,
> 
> å…¶ä¸­, `dp[1][1] = matrix[1][1]` ä¸” $1 < i \leq n, 1 < j \leq i$. åˆ™æœ€ç»ˆç»“æœä¸º `dp[n][1...n]` çš„æœ€å¤§å€¼.

## çŠ¶æ€

æ˜ç¡®ä¸¤ç‚¹:

* åˆå§‹çŠ¶æ€. å¦‚åœ¨ä¾‹1ä¸­, åˆå§‹çŠ¶æ€ä¸º `dp[1][1] = matrix[1][1]`, `dp` å…¶ä½™å…ƒç´ åº”åˆå§‹åŒ–ä¸ºä¸€ä¸ªåˆé€‚çš„æœ€å°æ•°, å¦‚ `INT_MIN`.

* ç­”æ¡ˆé€‰å–ä½ç½®. å¦‚åœ¨ä¾‹1ä¸­, æœ€ç»ˆç»“æœä¸º `max(dp[n][1...n])`.

## çŠ¶æ€è½¬ç§»

* æ³¨æ„é¡ºåº, è¦ä¿è¯è½¬ç§»åˆ°å½“å‰çŠ¶æ€çš„åŸçŠ¶æ€å·²ç»å¤„ç†å®Œæ¯•.

### ä¾‹2. æœ€é•¿ä¸Šå‡å­åºåˆ—( $LIS$ )

ç»™å®šä¸€ä¸ªåºåˆ—, æ±‚å…¶ $LIS$. å­åºåˆ—å®šä¹‰: å°†åŸåºåˆ—åˆ é™¤ $0$ ~ $n$ ä¸ªå…ƒç´ æ‰€ç»„æˆçš„åºåˆ—. å­åºåˆ—ä¸ä¸€å®šæ˜¯è¿ç»­çš„å…ƒç´ .

> ä»¤ `dp[i]` è¡¨ç¤ºä»¥åŸåºåˆ—ä¸‹æ ‡ä¸º `i` ç»“å°¾çš„ä¸Šå‡å­åºåˆ—çš„æœ€é•¿é•¿åº¦. å–åˆå§‹çŠ¶æ€å¯¹æ‰€æœ‰ `i` æœ‰ `dp[i] = 1`, ç­”æ¡ˆä¸º `max(dp[0...n - 1])`.
>
> å¯¹ä¸‹æ ‡ä¸º `i` çš„å…ƒç´ , æœ‰ `j` ä» `0` è‡³ `i - 1` ä¾æ¬¡æ›´æ–°
>
> `dp[i] = nums[j] <= nums[i] ? max(dp[i], dp[j] + 1) : dp[i]`.

* [æœ€å¤§è¿ç»­å­åºåˆ—å’Œ](https://leetcode-cn.com/problems/maximum-subarray/)

* [æœ€é•¿å…¬å…±å­åºåˆ— ( $LCS$ )](https://leetcode-cn.com/problems/longest-common-subsequence/)

# èƒŒåŒ…é—®é¢˜

## è¯¦è§ [èƒŒåŒ…ä¹è®²](èƒŒåŒ…ä¹è®².pdf).

### 01èƒŒåŒ…é—®é¢˜

æœ´ç´ ç®—æ³•:
```c++
#include <bits/stdc++.h>
using namespace std;

const int MAXSIZE = 1005;
int N, V, dp[MAXSIZE][MAXSIZE], v[MAXSIZE], w[MAXSIZE];

int main()
{
    cin >> N >> V;
    for (int i = 1; i <= N; i++)
        cin >> v[i] >> w[i];

    for (int i = 1; i <= N; i++)
    {
        for (int j = 1; j <= V; j++)
        {
            if (j < v[i])
                dp[i][j] = dp[i - 1][j];
            else
                dp[i][j] = max(dp[i - 1][j], dp[i - 1][j - v[i]] + w[i]);
        }
    }
    
    int res = 0;
    for (int j = 1; j <= V; j++)
        res = max(res, dp[N][j]);
    cout << res;

    return 0;
}
```

ä¼˜åŒ–ç©ºé—´å¤æ‚åº¦:
```c++
#include <bits/stdc++.h>
using namespace std;

const int MAXSIZE = 1005;
int N, V, dp[MAXSIZE], v[MAXSIZE], w[MAXSIZE];

int main()
{
    cin >> N >> V;
    for (int i = 1; i <= N; i++)
        cin >> v[i] >> w[i];

    for (int i = 1; i <= N; i++)
        for (int j = V; j >= v[i]; j--)
            dp[j] = max(dp[j], dp[j - v[i]] + w[i]);

    cout << dp[V];

    return 0;
}
```

### å®Œå…¨èƒŒåŒ…é—®é¢˜

```c++
#include <bits/stdc++.h>
using namespace std;

const int MAXSIZE = 1005;
int N, V, v[MAXSIZE], w[MAXSIZE], dp[MAXSIZE];

int main()
{
    cin >> N >> V;
    for (int i = 1; i <= N; i++)
        cin >> v[i] >> w[i];

    for (int i = 1; i <= N; i++)
        for (int j = v[i]; j <= V; j++)
            dp[j] = max(dp[j], dp[j - v[i]] + w[i]);

    cout << dp[V];

    return 0;
}
```

### å¤šé‡èƒŒåŒ…é—®é¢˜

* æœ´ç´ ç®—æ³•
  
    ```c++
    #include <bits/stdc++.h>
    using namespace std;

    const int MAXSIZE = 1005;
    int N, V, dp[MAXSIZE];

    int main()
    {
        cin >> N >> V;
        int v, w, s;
        for (int i = 1; i <= N; i++)
        {
            cin >> v >> w >> s;
            for (int j = V; j >= v; j--)
                for (int k = 1; k <= s && k * v <= j; k++)
                    dp[j] = max(dp[j], dp[j - k * v] + k * w);
        }

        cout << dp[V];

        return 0;
    }
    ```

* äºŒè¿›åˆ¶ä¼˜åŒ–
    ```c++
    #include <bits/stdc++.h>
    using namespace std;

    const int MAXSIZE = 2005;
    int N, V, dp[MAXSIZE];

    int main()
    {
        cin >> N >> V;
        int v, w, s;
        for (int i = 1; i <= N; i++)
        {
            cin >> v >> w >> s;
            /*
             * å½“å‰ç‰©å“æ•°é‡è¶³å¤Ÿå°†èƒŒåŒ…è£…åˆ°ä¸èƒ½å†è£…æ­¤ç‰©å“, ä¸ºå®Œå…¨èƒŒåŒ…é—®é¢˜ 
            **/
            if (s * v >= V)
            {
                for (int j = v; j <= V; j++)
                    dp[j] = max(dp[j], dp[j - v] + w);
            }
            /*
             * å½“å‰ç‰©å“å…¨éƒ¨è£…å…¥å, èƒŒåŒ…å®¹é‡è¿˜å¯ç»§ç»­è£…å½“å‰ç‰©å“,
             * ä¸ºå¤šé‡èƒŒåŒ…é—®é¢˜, äºŒè¿›åˆ¶ä¼˜åŒ–ä¸ºå¤šä¸ª01èƒŒåŒ…é—®é¢˜
            **/
            else
            {
                for (int k = 1; k < s; k <<= 1)
                {
                    for (int j = V; j >= k * v; j--)
                        dp[j] = max(dp[j], dp[j - k * v] + k * w);
                    s -= k;
                }
                for (int j = V; j >= s * v; j--)
                    dp[j] = max(dp[j], dp[j - s * v] + s * w);
            }
        }

        cout << dp[V];

        return 0;
    }
    ```

* å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–*
  
  é¢„å¤‡çŸ¥è¯†: æ»‘åŠ¨çª—å£ä¸å•è°ƒé˜Ÿåˆ—, ä¾‹ğŸ”—[LeetCode-239. Sliding Window Maximum](https://leetcode-cn.com/problems/sliding-window-maximum/)
  
    ```c++
    #include <bits/stdc++.h>
    using namespace std;

    const int MAXSIZE = 20005;
    int N, V, dp[MAXSIZE], g[MAXSIZE], q[MAXSIZE];

    int main()
    {
        cin >> N >> V;
        int v, w, s;
        for (int i = 1; i <= N; i++)
        {
            cin >> v >> w >> s;
            memcpy(g, dp, sizeof(dp));

            /*
            * å¯¹äºä»»æ„ä¸€ç§ç‰©å“è€Œè¨€, å…¶ä¸€å®šæ˜¯ä»¥ v ä¸ªå®¹é‡æ”¾å…¥èƒŒåŒ…çš„. å› æ­¤,
            * å¯¹äºä»»æ„çŠ¶æ€ä¸‹çš„å·²å ç”¨å®¹é‡, éƒ½å¯ä»¥åˆ†æˆæ¨¡ v çš„ä½™æ•°, å³ v ç±»æƒ…å†µ.
            * æ­¤æ—¶å¯¹äºä»»æ„çš„ j, åªéœ€è¦å‘ v çš„å€æ•°è½¬ç§».
            **/
            for (int j = 0; j < v; j++)
            {
                /*
                * front æŒ‡å‘é˜Ÿé¦–, rear æŒ‡å‘é˜Ÿå°¾, front > rear æ—¶è¡¨ç¤ºé˜Ÿç©º.
                * q ä¸ºå•è°ƒé˜Ÿåˆ—, ç”¨äºç»´æŠ¤æ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§å€¼çš„æ•°ç»„ä¸‹æ ‡.
                * v çš„ä¸ªæ•° = (ä¸‹æ ‡ - ä½™æ•°) / v = (q[front] - j) / v.
                * ä»·å€¼ = v * w = (k - j) / v * w.
                **/
                int front = 0, rear = -1;
                for (int k = j; k <= V; k += v)
                {
                    dp[k] = g[k];
                    // è‹¥å½“å‰çª—å£çš„å†…å®¹è¶…è¿‡äº† s ä¸ª (k - q[front] > s * v)
                    if (front <= rear && k - s * v > q[front])
                        front++;
                    
                    /*
                     * dp[k] = max(i - 1 çš„ dp[k], i - 1 çš„ dp ä¸­èƒ½
                     * è½¬ç§»çš„æœ€å¤§ + å¯ä»¥è£…å…¥çš„ä¸ªæ•° * å•ä¸ªä»·å€¼)
                    **/
                    if (front <= rear)
                        dp[k] = max(dp[k], g[q[front]] + (k - q[front]) / v * w);
                    while (front <= rear && g[q[rear]] - (q[rear] - j) / v * w <= g[k] - (k - j) / v * w)
                        rear--;
                    q[++rear] = k;
                }
            }
        }

        cout << dp[V];

        return 0;
    }
    ```

* å°ç»“*
  
  å¯¹äºå¤šé‡èƒŒåŒ…é—®é¢˜, å…¶å’Œå®Œå…¨èƒŒåŒ…é—®é¢˜çš„ä¸åŒä¹‹å¤„åœ¨äº, å®Œå…¨èƒŒåŒ…é—®é¢˜ä¸é™åˆ¶åŒä¸€ç§ç‰©å“æ”¾çš„ä¸ªæ•°, è€Œåœ¨å¤šé‡èƒŒåŒ…é—®é¢˜ä¸­, æ¯ç§ç‰©å“çš„ä¸ªæ•° $s_i$ å¯èƒ½ä¼šé™åˆ¶å…¶è½¬ç§»çš„çŠ¶æ€æ•°, å³å½“å‰æ”¾å…¥åçš„å®¹é‡ä¸æ­¤å®¹é‡çš„å‰ä¸€ä¸ªçŠ¶æ€ä¹‹å·®ä¸å½“å‰æ”¾å…¥çš„è¿™ç§ç‰©å“çš„ä½“ç§¯(èŠ±è´¹)ä¹‹æ¯”ä¸èƒ½è¶…è¿‡ $s_i$, å¦åˆ™æ˜¯æ— æ•ˆçš„è½¬ç§».

  å½“ $s_i$ é™åˆ¶è½¬ç§»çš„çŠ¶æ€æ—¶, åœ¨è½¬ç§»çš„è¿‡ç¨‹ä¸­ç›¸å½“äºå­˜åœ¨ä¸€ä¸ªå¤§å°ä¸º $s_i$ çš„æ»‘åŠ¨çª—å£. æ•…æ¯æ¬¡è¦å°†ä¹‹å‰çš„å€¼, ä¸æ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§å€¼æ¯”è¾ƒ, è€Œéä¸æ‰€æœ‰è½¬ç§»çš„æœ€å¤§å€¼æ¯”è¾ƒ.


### æ··åˆä¸‰ç§èƒŒåŒ…é—®é¢˜

